/**
 * Simba Grid
 * @name        simba-grid
 * @description Infinite grid scroll
 * @link        https://github.com/Rodgath/simba-grid
 * @author      Rodgath, https://Rodgath.com
 * @version     v1.0.0
 * @created     Jul 22, 2023
 * @updated     Aug 04, 2023
 * @copyright   Copyright (C) 2023-2023, Rodgath
 * @license     MIT
 * @licenseMIT  https://github.com/Rodgath/simba-grid/blob/main/LICENSE
 * @demoExample https://rodgath.github.io/simba-grid/demo/
 */
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function simbaGrid(e,i){i||(t=e.dataset.simbaGrid)&&(i=JSON.parse(t));var l="right"===(i=Object.assign({},{width:1200,cols:3,rows:3,rowHeight:280,gap:0,scrollSpeed:1,scrollDirection:"left",pauseOnHover:!0,shuffle:!1,animationStyle:"zoom"},i)).scrollDirection,n=e instanceof HTMLElement||e instanceof Node?e:document.querySelector(e),t=function(){var e,t=document.createElement("div");e=(i.hasOwnProperty("images")&&Array.isArray(i.images)&&0<i.images.length&&i.images.forEach(function(e){var t=document.createElement("img");t.src=e.src,t.alt=e.title,n.appendChild(t)}),n.querySelectorAll("*"));for(var r=0;r<e.length;r++)t.appendChild(e[r]);return t.style.display="none",document.body.appendChild(t),Array.from(t.querySelectorAll("*"))}();var s=parseInt(i.gap,10),r=parseInt(i.rowHeight,10),c=parseInt(i.width,10),e=parseInt(i.rows,10),d=parseInt(i.cols,10),a=e*d,o=t.length+(f=1,o=2,Math.floor(Math.random()*(o-f+1)+f)),o=(f=a,Math.max(Math.ceil(o/f),2)*f),u=o/a,f=function(e,t){if(e.length){for(var r=[],a=e.length,o=Math.ceil(t/a),n=0;n<o;n++)r.push.apply(r,_toConsumableArray(e));return r.slice(0,t)}}(i.shuffle?function(e){for(var t=e.slice(),r=t.length-1;0<r;r--){var a=Math.floor(Math.random()*(r+1)),o=[t[a],t[r]];t[r]=o[0],t[a]=o[1]}return t}(t):t,o),t=function(e,t){for(var r=[],a=0;a<e.length;a+=t)r.push(e.slice(a,a+t));return r}(f,a),o=2*t.length;(f=n).classList.add("simba-grid-wrapper"),f.style.width="100%",f.style.whiteSpce="nowrap",f.style.overflow="hidden",f.style.display="grid",f.style.gap="".concat(s,"px"),f.style.gridTemplateColumns="repeat(".concat(o,", 1fr)"),f.style.gridAutoRows="".concat(r*e,"px"),f.style.height="".concat((r+s)*e-s,"px"),t.forEach(function(e,t){e=e,(a=document.createElement("div")).classList.add("simba-grid-container"),a.style.minWidth="".concat(c,"px"),(o=document.createElement("div")).classList.add("simba-grid"),o.style.display="grid",o.style.gridTemplateColumns="repeat(".concat(d,", 1fr)"),o.style.gridAutoRows="".concat(r,"px"),o.style.gap="".concat(s,"px"),e.forEach(function(e,t){var r=document.createElement("div");r.classList.add("simba-grid-item"),r.style.overflow="hidden","IMG"===e.tagName?(r.style.backgroundImage="url(".concat(e.currentSrc,")"),r.style.backgroundSize="cover",r.style.backgroundPosition="center"):(e.style.width="100%",e.style.height="100%",e.style.whiteSpace="normal",r.innerHTML=e.outerHTML),o.appendChild(r),a.appendChild(o)});var a,o,e=a;l&&(e=w(a)),n.appendChild(e)});for(var y=n,m=y.children,p=[],h=0;h<m.length;h++){var g=m[h].cloneNode(!0);p.push(g)}p.forEach(function(e){y.appendChild(e)});var b=y.querySelectorAll(".simba-grid-item");if(l)for(var v=b.length-1;0<=v;v--)E(b,v);else for(var S=0;S<b.length;S++)E(b,S);if(l)for(var A=0;A<m.length;A++)w(m[A]);function w(e){var t=e.querySelector(".simba-grid"),r=t.querySelectorAll(".simba-grid-item"),a=Array.from(r);for(a.sort(function(e,t){e=Math.floor(a.indexOf(e)/i.cols);return Math.floor(a.indexOf(t)/i.cols)-e}),r.forEach(function(e){return e.remove()}),a.forEach(function(e){return t.appendChild(e)});e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(t),e}var L=!1;function E(e,t){var r=e[t],a="",o="",n=l?"+20deg":"-20deg";switch(i.animationStyle){case"zoom":a="scale(0)",o="scale(1)";break;case"rotate":a="rotate(".concat(n,")"),o="rotate(0deg)";break;case"zoomRotate":a="rotate(".concat(n,") scale(0)"),o="rotate(0deg) scale(1)";break;default:o=a=""}"zoom"!==i.animationStyle&&"rotate"!==i.animationStyle&&"zoomRotate"!==i.animationStyle||(r.style.opacity=0,r.style["-webkit-transform"]=a,r.style.transform=a,r.style.transitionProperty="opacity, transform",r.style.transitionDuration="0.4s, 0.4s",r.style.transitionTimingFunction="linear, linear",r.style.transitionDelay="0s, 0s",e=l?200*(e.length-t-1):200*t,setTimeout(function(){r.style.opacity=1,r.style["-webkit-transform"]=o,r.style.transform=o},e))}(function e(){var t,r=document.querySelector(".simba-grid-container");L||(t=r.offsetWidth*u+u*s,l?n.scrollLeft<=t-r.parentNode.offsetWidth?n.scrollLeft+=2*t:n.scrollLeft-=i.scrollSpeed:n.scrollLeft>=t?n.scrollLeft-=t:n.scrollLeft+=i.scrollSpeed),requestAnimationFrame(e)})(),n.addEventListener("mouseenter",function(){return L=!!i.pauseOnHover}),n.addEventListener("mouseleave",function(){return L=!1})}var simbaGridScrollElements=document.querySelectorAll("[data-simba-grid]");simbaGridScrollElements.forEach(function(e){return simbaGrid(e)});